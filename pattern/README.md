# 常考设计模式

考察不多
## 单例设计模式

  保证一个类只有一个实例，并且提供一个访问该全局访问点

实现时需要注意以下几点：
1. 单例类的构造函数为私有
2. 提供一个自身的静态私有成员变量
3. 提供一个公有的静态工厂方法

- 使用场景：

网站计数器、应用程序的日志应用

- 种类，代码见两个cpp
    - 懒汉式：获取该类的对象时才创建该类的实例
    - 饿汉式：获取该类的对象之前已经创建好该类的实例


## 工厂模式

### 简单工厂模式

可以根据参数的不同返回不同类的实例。简单工厂模式专门定义一个类来负责创建其他类的实例，被创建的实例通常都具有共同的父类

角色：
1. 公共基类：负责描述所有实例所共有的公共接口
2. 具体类的实例
3. 工厂角色：负责创建所有实例内部逻辑

### 工厂方法模式

将具体按钮的创建过程交给专门的工厂子类去完成，体现C++中多态性。

工厂父类负责定义创建产品对象的公共接口，而工厂子类则负责生成具体的产品对象


### 抽象工厂

需要生产的多个位于不同产品等级结构中属于不同类型的具体产品

一个工厂等级结构可以负责多个不同产品等级结构中的产品对象的创建
- 例如：海尔电器工厂生产的海尔电视机、海尔电冰箱，海尔电视机位于电视机产品等级结构中，海尔电冰箱位于电冰箱产品等级结构中

角色：
1. 抽象工厂用于声明生成抽象产品的方法
2. 具体工厂实现了抽象工厂声明的生成抽象产品的方法，生成一组具体产品，这些产品构成了一个产品族，每一个产品都位于某个产品等级结构中
3. 抽象产品接口为每种产品声明接口，在抽象产品中定义了产品的抽象业务方法
4. 具体产品定义具体工厂生产的具体产品对象，实现抽象产品接口中定义的业务方法

### 建造者模式

将一个复杂对象的构建与它的表示分离，使得同样的构建过程可以创建不同的表示。

1. 抽象建造者为创建一个产品对象的各个部件指定抽象接口
2. 具体建造者实现了抽象建造者接口，实现各个部件的构造和装配方法
3. 产品角色是被构建的复杂对象，包含多个组成部件
4. 指挥者负责安排复杂对象的建造次序

通过指挥者类调用建造者的相关方法，返回一个完整的产品对象

## 观察者模式

观察者模式的作用是：定义对象间的一种一对多的依赖关系，当一个对象的状态发生改变时，所有依赖于它的对象都得到通知并被自动更新。

1. 目标又称为主题，它是指被观察的对象
2. 具体目标是目标类的子类，通常它包含有经常发生改变的数据，当它的状态发生改变时，向它的各个观察者发出通知。即Partition中leader
3. 观察者将对观察目标的改变做出反应，ISR中Follower
4. 具体观察者中维护一个指向具体目标对象的引用，它存储具体观察者的有关状态，这些状态需要和具体目标的状态保持一致

应用场景：消息队列
## 适配器模式

一个类接口转为客户希望的另一个接口，使得原本由于接口不兼容而不能一起工作类一起工作

1. 目标抽象类定义客户要用的特定领域的接口
2. 适配器类可以调用另一个接口，作为一个转换器，对适配者和抽象目标类进行适配
3. 适配者类是被适配的角色，它定义了一个已经存在的接口，这个接口需要适配
